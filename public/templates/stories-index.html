<h2>Your stories:</h2>
<table>
<tr ng-repeat="story in stories">
  <td ng-hide="editing || !isPublishable(story) || story.published" width="5%">
    <button ng-click="publish(story)">publish</button>
    <button ng-click="archive({story_id: story.id})">archive</button>
    <button ng-click="feature(story)">feature</button>
  </td>
  <td ng-hide="editing || !isPublishable(story) || !story.published" width="5%">
    <button ng-click="unpublish(story)">unpublish</button>
    <button ng-click="archive({story_id: story.id})">archive</button>
    <button ng-click="feature(story)">feature</button>
  </td>
  <td ng-hide="editing || isPublishable(story)" width="5%">
    <button ng-click="archive({story_id: story.id})">archive</button>
    <button ng-click="feature(story)">feature</button>
  </td>
  <td ng-hide="editing" ng-click="editing=true" width="10%">{{story.title}}</td>
  <td ng-hide="editing" ng-click="editing=true" ng-bind="hashtags" width="5%">
  </td>
  <td ng-hide="editing" ng-click="editing=true" width="80%">{{story.text}}</td>

  <td colspan="4">
  <form ng-show="editing" ng-submit="editing=false">
  <label for="hashtag">
    hashtag#
  </label>
  <input type="text" ng-model="hashtags" ng-model-options="{ getterSetter: true }" ng-init="hashtags=convertToString(story.hashtags)" size="100%"/><br>
  <label for="title">
    title
  </label>
  <input type="text" ng-model="story.title" size="100%"/><br>
  <label for="text">
    text
  </label>
  <textarea ng-model="story.text" rows="5" cols="100%"></textarea><br>
  <button type="submit" ng-click="updateStory(story, hashtags)">save</button>
  <button type="button" ng-click="editing=false; cancelUpdate(story); hashtags=convertToString(story.hashtags)">cancel</button>
  </form>
  </td>

</tr>
</table>